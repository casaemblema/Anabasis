<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Favicons -->
 <link rel="icon" href="/favicon.ico" sizes="any">
 <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
 <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
 <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180.png">

  
  <title>Anabasis | Water Engineering</title>

  <!-- SEO básico -->
  <meta name="description" content="Anabasis · Water Engineering. Purificación y tratamiento de agua para hogar, comercio e industria en Monterrey y área metropolitana." />

  <!-- Open Graph -->
  <meta property="og:title" content="Anabasis | Water Engineering" />
  <meta property="og:description" content="Purificación y tratamiento de agua para hogar, comercio e industria en MTY y área metropolitana." />
  <meta property="og:image" content="https://anabasis.mx/og-image.jpg" />
  <meta property="og:type" content="website" />

  <style>
    :root {
      --bg: #fbfcfe;
      --card: #ffffff;
      --text: #0b0f14;
      --muted: #5c6775;
      --line: rgba(10, 20, 35, 0.10);

      --accent: #2aa8ff;
      --accent-2: #0a6cff;
      --accent-soft: rgba(42, 168, 255, 0.14);

      --radius-xl: 22px;
      --radius-lg: 16px;
      --radius-md: 12px;

      --shadow: 0 18px 45px rgba(10, 20, 35, 0.10);
      --shadow-soft: 0 10px 25px rgba(10, 20, 35, 0.08);

      --font: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(42,168,255,0.20), transparent 55%),
        radial-gradient(900px 500px at 85% 0%, rgba(10,108,255,0.12), transparent 55%),
        var(--bg);
    }

    a { color: inherit; }
    .container {
      width: 100%;
      max-width: 1080px;
      margin: 0 auto;
      padding: 22px 18px 64px;
    }

    /* Header */
    .header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(251, 252, 254, 0.75);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(10, 20, 35, 0.06);
    }
    .header-inner {
      max-width: 1080px;
      margin: 0 auto;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 220px;
    }
    .logo {
      width: 38px;
      height: 38px;
      border-radius: 10px;
      border: 1px solid rgba(10, 20, 35, 0.10);
      background: #fff;
      overflow: hidden;
      display: grid;
      place-items: center;
      box-shadow: 0 6px 18px rgba(10, 20, 35, 0.08);
      flex: 0 0 auto;
    }
    .logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 6px;
      display: block;
    }
    .brand-name {
      display: flex;
      flex-direction: column;
      line-height: 1.05;
    }
    .brand-name strong {
      font-weight: 650;
      letter-spacing: 0.02em;
    }
    .brand-name span {
      font-size: 0.86rem;
      color: var(--muted);
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .nav a {
      text-decoration: none;
      font-size: 0.92rem;
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid transparent;
      transition: background 0.14s ease, border-color 0.14s ease, color 0.14s ease, transform 0.14s ease;
    }
    .nav a:hover {
      color: var(--text);
      border-color: rgba(10, 20, 35, 0.10);
      background: rgba(255,255,255,0.65);
      transform: translateY(-1px);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(10, 20, 35, 0.12);
      background: #fff;
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      letter-spacing: 0.01em;
      box-shadow: 0 8px 22px rgba(10, 20, 35, 0.08);
      transition: transform 0.14s ease, box-shadow 0.14s ease, border-color 0.14s ease, filter 0.14s ease;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-soft); border-color: rgba(42,168,255,0.35); }
    .btn:active { transform: translateY(0px) scale(0.99); filter: brightness(0.98); }

    .btn.primary {
      border-color: rgba(42,168,255,0.50);
      background: linear-gradient(135deg, rgba(42,168,255,0.18), rgba(10,108,255,0.10));
    }
    .btn.solid {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff;
      border-color: rgba(255,255,255,0.15);
      box-shadow: 0 14px 30px rgba(10,108,255,0.22);
    }
    .btn.solid:hover { border-color: rgba(255,255,255,0.25); }

    /* Sections */
    .section { margin-top: 34px; }

    .hero {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 18px;
      align-items: stretch;
    }

    .panel {
      background: rgba(255,255,255,0.75);
      border: 1px solid rgba(10, 20, 35, 0.10);
      border-radius: 22px;
      padding: 24px;
      box-shadow: var(--shadow);
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .panel:hover { transform: translateY(-1px); box-shadow: 0 20px 55px rgba(10,20,35,0.12); }

    .kicker {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 0.92rem;
      color: var(--muted);
      margin-bottom: 10px;
    }
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 6px var(--accent-soft);
    }

    h1 {
      margin: 0 0 8px;
      font-size: clamp(2.0rem, 4.2vw, 3.0rem);
      letter-spacing: 0.01em;
    }
    .tag {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin: 0 0 12px;
      color: var(--muted);
      font-weight: 600;
    }
    .tag b { color: var(--text); }

    .lead {
      margin: 0 0 18px;
      color: var(--muted);
      font-size: 1.02rem;
      line-height: 1.55;
      max-width: 56ch;
    }
    .cta-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 6px;
    }
    .micro {
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid rgba(10, 20, 35, 0.08);
      color: var(--muted);
      font-size: 0.92rem;
      display: grid;
      gap: 6px;
    }

    .mini-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .mini {
      border: 1px solid rgba(10, 20, 35, 0.10);
      border-radius: 16px;
      background: rgba(255,255,255,0.70);
      padding: 14px;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .mini:hover { transform: translateY(-1px); box-shadow: 0 14px 28px rgba(10,20,35,0.10); }
    .mini strong { display:block; font-size:0.95rem; margin-bottom: 4px; }
    .mini span { color: var(--muted); font-size:0.9rem; line-height: 1.35; }

    .section-title {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    .section-title h2 {
      margin: 0;
      font-size: 1.25rem;
      letter-spacing: 0.01em;
    }
    .section-title p {
      margin: 0;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    .card {
      background: rgba(255,255,255,0.78);
      border: 1px solid rgba(10, 20, 35, 0.10);
      border-radius: 22px;
      padding: 18px;
      box-shadow: 0 10px 25px rgba(10, 20, 35, 0.06);
      transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
    }
    .card:hover {
      transform: translateY(-1px);
      border-color: rgba(42,168,255,0.25);
      box-shadow: 0 18px 35px rgba(10, 20, 35, 0.10);
    }
    .card h3 { margin: 0 0 6px; font-size: 1.02rem; }
    .card p { margin: 0; color: var(--muted); line-height: 1.45; font-size: 0.95rem; }

    .quote-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      align-items: start;
    }

    /* WhatsApp mini form */
    form {
      display: grid;
      gap: 10px;
      margin-top: 10px;
    }
    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    label {
      display: grid;
      gap: 6px;
      font-size: 0.86rem;
      color: var(--muted);
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(10, 20, 35, 0.14);
      background: rgba(255,255,255,0.92);
      outline: none;
      font: inherit;
      color: var(--text);
      transition: border-color 0.12s ease, box-shadow 0.12s ease, transform 0.12s ease;
    }
    textarea { min-height: 88px; resize: vertical; }
    input:focus, select:focus, textarea:focus {
      border-color: rgba(42,168,255,0.55);
      box-shadow: 0 0 0 6px rgba(42,168,255,0.14);
      transform: translateY(-1px);
    }

    .checks {
      display: grid;
      gap: 8px;
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(10, 20, 35, 0.12);
      background: rgba(255,255,255,0.70);
    }
    .checks span { font-size: 0.86rem; color: var(--muted); font-weight: 650; }
    .check-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px 10px;
    }
    .check-row label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      color: var(--text);
      font-size: 0.92rem;
      cursor: pointer;
    }
    .check-row input { width: 18px; height: 18px; cursor: pointer; }

    .note {
      margin: 10px 0 0;
      color: var(--muted);
      font-size: 0.86rem;
      line-height: 1.45;
    }

    /* Google Form embed wrapper */
    .embed-wrap {
      border-radius: 22px;
      overflow: hidden;
      border: 1px solid rgba(10, 20, 35, 0.10);
      background: rgba(255,255,255,0.78);
      box-shadow: 0 12px 25px rgba(10, 20, 35, 0.06);
    }
    .embed-wrap iframe {
      width: 100%;
      height: 1120px;
      border: 0;
      display: block;
      background: #fff;
    }

    /* Footer */
    .footer {
      margin-top: 34px;
      padding-top: 18px;
      border-top: 1px solid rgba(10, 20, 35, 0.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .footer a {
      text-decoration: none;
      border-bottom: 1px solid rgba(42,168,255,0.35);
      color: var(--text);
      font-weight: 600;
    }

    /* Micro-animaciones al aparecer (scroll) */
    .reveal {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.6s ease, transform 0.6s ease;
      will-change: opacity, transform;
    }
    .reveal.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Botón flotante WhatsApp (discreto en desktop, prominente en móvil) */
    .wa-float {
      position: fixed;
      right: 18px;
      bottom: 18px;
      z-index: 999;
      display: grid;
      place-items: center;

      width: 52px;
      height: 52px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.22);
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 14px 30px rgba(10,108,255,0.18);

      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      transition: transform 0.14s ease, filter 0.14s ease, opacity 0.14s ease, box-shadow 0.14s ease;
      opacity: 0.84;
    }
    .wa-float:hover { transform: translateY(-1px); opacity: 1; box-shadow: 0 18px 38px rgba(10,108,255,0.22); }
    .wa-float:active { transform: translateY(0px) scale(0.98); filter: brightness(0.98); }

    .wa-float svg {
      width: 24px;
      height: 24px;
      fill: #fff;
      display: block;
    }

    /* Responsive */
    @media (max-width: 980px) {
      .hero { grid-template-columns: 1fr; }
      .mini-grid { grid-template-columns: 1fr; }
      .cards { grid-template-columns: 1fr; }
      .quote-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 560px) {
      .row { grid-template-columns: 1fr; }
      .embed-wrap iframe { height: 1240px; }

      .wa-float {
        width: 56px;
        height: 56px;
        right: 16px;
        bottom: 16px;
        opacity: 1;
        box-shadow: 0 18px 35px rgba(10,108,255,0.28);
      }
      .wa-float svg { width: 26px; height: 26px; }
    }

    /* Respeta usuarios que prefieren menos movimiento */
    @media (prefers-reduced-motion: reduce) {
      .btn, .nav a, .panel, .mini, .card, input, select, textarea, .reveal, .wa-float {
        transition: none !important;
        transform: none !important;
      }
    }
  </style>
</head>

<body>
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <div class="logo" aria-label="Logo Anabasis">
          <img src="logo.png" alt="Anabasis" onerror="this.style.display='none'; this.parentElement.textContent='A'; this.parentElement.style.fontWeight='800'; this.parentElement.style.color='#0b0f14';" />
        </div>
        <div class="brand-name">
          <strong>Anabasis</strong>
          <span>Water Engineering</span>
        </div>
      </div>

      <nav class="nav" aria-label="Navegación">
        <a href="#soluciones">Soluciones</a>
        <a href="#proceso">Cómo trabajamos</a>
        <a href="#cotizar">Cotizar</a>
        <a class="btn solid" href="#" id="waTop">WhatsApp</a>
      </nav>
    </div>
  </header>

  <!-- Botón flotante WhatsApp (discreto en desktop, prominente en móvil) -->
  <button class="wa-float" id="waFloat" aria-label="WhatsApp Anabasis">
    <svg viewBox="0 0 32 32" aria-hidden="true">
      <path d="M19.11 17.39c-.27-.14-1.59-.78-1.84-.87-.25-.09-.43-.14-.61.14-.18.27-.7.87-.86 1.05-.16.18-.32.2-.59.07-.27-.14-1.12-.41-2.14-1.31-.79-.7-1.33-1.56-1.48-1.82-.16-.27-.02-.41.12-.55.12-.12.27-.32.41-.48.14-.16.18-.27.27-.46.09-.18.05-.34-.02-.48-.07-.14-.61-1.48-.84-2.03-.22-.53-.44-.46-.61-.47h-.52c-.18 0-.48.07-.73.34-.25.27-.95.93-.95 2.28s.97 2.65 1.11 2.83c.14.18 1.91 2.92 4.63 4.1.65.28 1.16.45 1.55.58.65.21 1.24.18 1.71.11.52-.08 1.59-.65 1.81-1.28.22-.63.22-1.17.16-1.28-.07-.11-.25-.18-.52-.32zM16.02 27.2h-.01c-1.94 0-3.84-.52-5.5-1.5l-.4-.24-4.07 1.07 1.09-3.97-.26-.41a10.89 10.89 0 0 1-1.68-5.79c0-6.01 4.9-10.9 10.92-10.9 2.91 0 5.65 1.13 7.71 3.19a10.84 10.84 0 0 1 3.2 7.71c0 6.01-4.9 10.9-11 10.9zm9.34-20.24A13.1 13.1 0 0 0 16.1 3.2C8.67 3.2 2.6 9.26 2.6 16.69c0 2.33.61 4.61 1.77 6.62L2.5 30.2l7.08-1.86a13.42 13.42 0 0 0 6.51 1.67h.01c7.43 0 13.5-6.06 13.5-13.49 0-3.6-1.4-6.98-3.74-9.56z"/>
    </svg>
  </button>

  <main class="container">
    <!-- HERO -->
    <section class="hero section">
      <div class="panel reveal">
        <div class="kicker"><span class="dot"></span> MTY · Área Metropolitana</div>
        <h1>Anabasis</h1>
        <div class="tag"><b>Water Engineering</b> · Purificación y tratamiento de agua</div>
        <p class="lead">
          Soluciones para <b>hogar</b>, <b>comercio</b> e <b>industria</b>.
          Te orientamos con diagnóstico inicial y propuestas por etapas, según tu necesidad.
        </p>

        <div class="cta-row">
          <a class="btn solid" href="#" id="waHero">Cotizar por WhatsApp</a>
          <a class="btn primary" href="#cotizar">Solicitar info sin WhatsApp</a>
        </div>

        <div class="micro">
          <div>• Diagnóstico inicial</div>
          <div>• Propuesta por etapas (básico → completo)</div>
          <div>• Instalación y mantenimiento (si lo requieres)</div>
        </div>
      </div>

      <div class="panel reveal">
        <div class="section-title" style="margin-bottom: 10px;">
          <h2>Enfoque general</h2>
          <p>Sin complicarte</p>
        </div>
        <div class="mini-grid">
          <div class="mini">
            <strong>Calidad y consistencia</strong>
            <span>Mejora de agua para higiene, consumo (si aplica) y protección de equipos.</span>
          </div>
          <div class="mini">
            <strong>Escalable</strong>
            <span>Opciones que se adaptan a tu presupuesto y al nivel de tratamiento requerido.</span>
          </div>
          <div class="mini">
            <strong>Ingeniería aplicada</strong>
            <span>Recomendaciones claras: qué sí vale la pena y qué no.</span>
          </div>
        </div>
      </div>
    </section>

    <!-- SOLUCIONES -->
    <section class="section" id="soluciones">
      <div class="section-title reveal">
        <h2>Soluciones</h2>
        <p>Residencial · Comercial · Industrial</p>
      </div>

      <div class="cards">
        <article class="card reveal">
          <h3>Hogar</h3>
          <p>Mejora de agua para higiene, cocina y equipos. Se define por consumo, problema principal y prioridades.</p>
        </article>
        <article class="card reveal">
          <h3>Comercio</h3>
          <p>Soluciones para restaurantes, oficinas, gimnasios, clínicas y más: consistencia y protección de infraestructura.</p>
        </article>
        <article class="card reveal">
          <h3>Industria</h3>
          <p>Tratamiento para procesos, prefiltrado y protección de equipos y líneas de agua, según requerimientos.</p>
        </article>
      </div>
    </section>

    <!-- PROCESO -->
    <section class="section" id="proceso">
      <div class="section-title reveal">
        <h2>Cómo trabajamos</h2>
        <p>3 pasos, sin humo</p>
      </div>

      <div class="cards">
        <article class="card reveal">
          <h3>1) Levantamiento</h3>
          <p>Ubicación, consumo aproximado y problema principal. Con eso se define el primer enfoque.</p>
        </article>
        <article class="card reveal">
          <h3>2) Propuesta</h3>
          <p>Recomendación por etapas con opciones. Priorizamos costo-beneficio y claridad técnica.</p>
        </article>
        <article class="card reveal">
          <h3>3) Implementación</h3>
          <p>Instalación y seguimiento. Si lo requieres, mantenimiento y mejoras futuras.</p>
        </article>
      </div>
    </section>

    <!-- COTIZAR -->
    <section class="section" id="cotizar">
      <div class="section-title reveal">
        <h2>Cotización</h2>
        <p>WhatsApp (principal) o formulario (alternativa)</p>
      </div>

      <div class="quote-grid">
        <!-- WhatsApp card -->
        <div class="card reveal">
          <h3>Respuesta rápida por WhatsApp</h3>
          <p>Completa lo mínimo. Generamos un mensaje claro y te atendemos por WhatsApp Business.</p>

          <form id="waForm">
            <div class="row">
              <label>
                Nombre
                <input type="text" id="name" placeholder="Tu nombre" required />
              </label>
              <label>
                Ciudad / Colonia
                <input type="text" id="zone" placeholder="Ej. San Pedro, Cumbres, Centro…" required />
              </label>
            </div>

            <div class="row">
              <label>
                Tipo de proyecto
                <select id="project" required>
                  <option value="" selected disabled>Selecciona…</option>
                  <option>Casa / Residencial</option>
                  <option>Negocio / Comercio</option>
                  <option>Industria</option>
                </select>
              </label>
              <label>
                Teléfono (opcional)
                <input type="tel" id="phone" placeholder="Ej. 81XXXXXXX" />
              </label>
            </div>

            <div class="checks">
              <span>Problema principal (elige lo que aplique)</span>
              <div class="check-row">
                <label><input type="checkbox" value="Sarro / incrustaciones" class="issue" /> Sarro / incrustaciones</label>
                <label><input type="checkbox" value="Sedimentos / partículas" class="issue" /> Sedimentos</label>
                <label><input type="checkbox" value="Olor o sabor" class="issue" /> Olor/sabor</label>
                <label><input type="checkbox" value="Seguridad sanitaria" class="issue" /> Seguridad sanitaria</label>
                <label><input type="checkbox" value="Protección de equipos" class="issue" /> Protección equipos</label>
                <label><input type="checkbox" value="Otro" class="issue" /> Otro</label>
              </div>
            </div>

            <label>
              Mensaje (opcional)
              <textarea id="msg" placeholder="Cuéntanos brevemente qué buscas o qué te preocupa."></textarea>
            </label>

            <button class="btn solid" type="submit">Enviar por WhatsApp</button>
          </form>

          <p class="note">
            También puedes escribirnos directo:
            <a href="https://wa.me/528184613223" target="_blank" rel="noopener" style="color: var(--accent-2); font-weight: 700; text-decoration: none; border-bottom: 1px solid rgba(10,108,255,0.35);">+52 81 8461 3223</a>
          </p>
        </div>

        <!-- Google Form embed card -->
        <div class="card reveal">
          <h3>Prefiero solicitar información sin WhatsApp</h3>
          <p>Deja tu solicitud en el formulario y te respondemos por correo con seguimiento.</p>

          <div class="embed-wrap" aria-label="Formulario Anabasis">
            <iframe
              src="https://docs.google.com/forms/d/e/1FAIpQLSff-kROqKWtc8zPONj9VKDdXb6N5QEP2SPZwnwzE4zTdN6CrQ/viewform?embedded=true"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title="Formulario Anabasis"
            >
              Loading…
            </iframe>
          </div>

          <p class="note">
            Si prefieres, también puedes escribirnos por correo:
            <a href="mailto:hola@anabasis.mx" style="color: var(--accent-2); font-weight: 700; text-decoration: none; border-bottom: 1px solid rgba(10,108,255,0.35);">hola@anabasis.mx</a>
          </p>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer reveal">
      <div>© <span id="year"></span> Anabasis · Monterrey, NL</div>
      <div style="display:flex; gap:14px; flex-wrap:wrap;">
        <a href="https://www.instagram.com/anabasis.mx" target="_blank" rel="noopener">Instagram · @anabasis.mx</a>
        <a href="mailto:hola@anabasis.mx">hola@anabasis.mx</a>
      </div>
    </footer>
  </main>

  <script>
    // Año automático
    document.getElementById("year").textContent = new Date().getFullYear();

    const WA_NUMBER = "528184613223";

    function buildWhatsAppMessage(data) {
      const issues = data.issues.length ? data.issues.join(", ") : "No especificado";
      const lines = [
        "Hola, Anabasis. Quiero información/cotización.",
        "",
        `Nombre: ${data.name}`,
        `Ciudad/Colonia: ${data.zone}`,
        `Tipo de proyecto: ${data.project}`,
        data.phone ? `Teléfono: ${data.phone}` : null,
        `Problema principal: ${issues}`,
        data.msg ? `Mensaje: ${data.msg}` : null
      ].filter(Boolean);

      return lines.join("\n");
    }

    function openWhatsApp(message) {
      const url = `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank", "noopener");
    }

    // Botones WhatsApp (arriba/hero)
    document.getElementById("waTop").addEventListener("click", (e) => {
      e.preventDefault();
      openWhatsApp("Hola, Anabasis. Quiero información/cotización (MTY y área metropolitana).");
    });

    document.getElementById("waHero").addEventListener("click", (e) => {
      e.preventDefault();
      openWhatsApp("Hola, Anabasis. Quiero información/cotización. ¿Me pueden orientar según mi necesidad?");
    });

    // Botón flotante
    document.getElementById("waFloat").addEventListener("click", () => {
      openWhatsApp("Hola, Anabasis. Quiero información/cotización. ¿Me pueden orientar según mi necesidad?");
    });

    // Formulario WA
    document.getElementById("waForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const issues = Array.from(document.querySelectorAll(".issue:checked")).map(i => i.value);

      const data = {
        name: document.getElementById("name").value.trim(),
        zone: document.getElementById("zone").value.trim(),
        project: document.getElementById("project").value,
        phone: document.getElementById("phone").value.trim(),
        issues,
        msg: document.getElementById("msg").value.trim()
      };

      openWhatsApp(buildWhatsAppMessage(data));
    });

    // Micro-animaciones al aparecer (IntersectionObserver)
    (function initReveal() {
      const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const els = Array.from(document.querySelectorAll(".reveal"));

      if (prefersReduced) {
        els.forEach(el => el.classList.add("is-visible"));
        return;
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("is-visible");
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12 });

      els.forEach(el => io.observe(el));
    })();
  </script>
</body>
</html>
